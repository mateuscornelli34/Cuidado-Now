# Diagramas da IntegraÃ§Ã£o Firebase

## ğŸ”„ Arquitetura Geral

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CUIDADO-NOW APP                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  Settings  â”‚  â”‚   Login    â”‚  â”‚  UserData  â”‚           â”‚
â”‚  â”‚  Screen    â”‚  â”‚  Screen    â”‚  â”‚  Service   â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚        â”‚                â”‚                â”‚                   â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                         â”‚                                    â”‚
â”‚                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚                â”‚ FirebaseService â”‚                          â”‚
â”‚                â”‚                 â”‚                          â”‚
â”‚                â”‚ â€¢ initialize()  â”‚                          â”‚
â”‚                â”‚ â€¢ login()       â”‚                          â”‚
â”‚                â”‚ â€¢ syncData()    â”‚                          â”‚
â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â”‚ Firebase SDK
                          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  GOOGLE FIREBASE                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Firestore   â”‚  â”‚     Auth     â”‚  â”‚   Hosting    â”‚    â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚    â”‚
â”‚  â”‚ users/       â”‚  â”‚ Email/Pass   â”‚  â”‚ Web Version  â”‚    â”‚
â”‚  â”‚ â””â”€ profile   â”‚  â”‚ Google       â”‚  â”‚ .web.app     â”‚    â”‚
â”‚  â”‚ â””â”€ chats     â”‚  â”‚ (future)     â”‚  â”‚              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”€ Fluxo de InicializaÃ§Ã£o Completo

```
APP STARTUP (App.js)
â”‚
â”œâ”€â–º Carrega fontes (Ionicons)
â”‚
â”œâ”€â–º Inicializa ThemeProvider
â”‚
â””â”€â–º Inicializa UserDataService
    â”‚
    â”œâ”€â–º UserData.init()
    â”‚   â”‚
    â”‚   â”œâ”€â–º 1. Gera/Carrega User ID
    â”‚   â”‚   â”‚
    â”‚   â”‚   â”œâ”€â–º Verifica AsyncStorage
    â”‚   â”‚   â”‚   â”œâ”€ Existe? â†’ Usa existente
    â”‚   â”‚   â”‚   â””â”€ NÃ£o existe? â†’ Gera novo
    â”‚   â”‚   â”‚
    â”‚   â”‚   â””â”€â–º Salva: 'user_1706390000_abc123'
    â”‚   â”‚
    â”‚   â”œâ”€â–º 2. Define userId no FirebaseService
    â”‚   â”‚   â”‚
    â”‚   â”‚   â””â”€â–º firebaseService.setUserId(uid)
    â”‚   â”‚       â””â”€â–º this.userId = uid
    â”‚   â”‚
    â”‚   â””â”€â–º 3. Tenta carregar Firebase config
    â”‚       â”‚
    â”‚       â””â”€â–º firebaseService.loadConfig()
    â”‚           â”‚
    â”‚           â”œâ”€â–º LÃª AsyncStorage('@mindcare_firebase_config')
    â”‚           â”‚
    â”‚           â”œâ”€â–º Config encontrada?
    â”‚           â”‚   â”‚
    â”‚           â”‚   â”œâ”€ SIM â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚           â”‚   â”‚                     â”‚
    â”‚           â”‚   â”‚                     â–¼
    â”‚           â”‚   â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚           â”‚   â”‚          â”‚ initialize()     â”‚
    â”‚           â”‚   â”‚          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚           â”‚   â”‚          â”‚ initializeApp()  â”‚
    â”‚           â”‚   â”‚          â”‚ getFirestore()   â”‚
    â”‚           â”‚   â”‚          â”‚ getAuth()        â”‚
    â”‚           â”‚   â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚           â”‚   â”‚                   â”‚
    â”‚           â”‚   â”‚                   â–¼
    â”‚           â”‚   â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚           â”‚   â”‚          â”‚ isInitialized âœ“  â”‚
    â”‚           â”‚   â”‚          â”‚ Firebase ATIVO   â”‚
    â”‚           â”‚   â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚           â”‚   â”‚
    â”‚           â”‚   â””â”€ NÃƒO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚           â”‚                        â”‚
    â”‚           â”‚                        â–¼
    â”‚           â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚           â”‚               â”‚ isInitialized âœ—  â”‚
    â”‚           â”‚               â”‚ App LOCAL ONLY   â”‚
    â”‚           â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚           â”‚
    â”‚           â””â”€â–º App continua (com ou sem Firebase)
    â”‚
    â””â”€â–º APP PRONTO
        â”‚
        â”œâ”€â–º COM Firebase
        â”‚   â”œâ”€ Auth disponÃ­vel
        â”‚   â”œâ”€ Firestore disponÃ­vel
        â”‚   â””â”€ Sync pode ocorrer
        â”‚
        â””â”€â–º SEM Firebase
            â”œâ”€ Apenas AsyncStorage
            â”œâ”€ Auth desabilitado
            â””â”€ Sem sync na nuvem
```

## ğŸ“Š Estrutura de Dados Detalhada

### Firestore Database

```
cuidadonow (projeto)
â”‚
â””â”€ firestore/
   â”‚
   â”œâ”€ users/                                    [Collection]
   â”‚  â”‚
   â”‚  â”œâ”€ user_1706390000_abc123/               [Document]
   â”‚  â”‚  â”‚
   â”‚  â”‚  â”œâ”€ name: "JoÃ£o Silva"                 [String]
   â”‚  â”‚  â”œâ”€ firstName: "JoÃ£o"                  [String]
   â”‚  â”‚  â”œâ”€ lastName: "Silva"                  [String]
   â”‚  â”‚  â”œâ”€ phone: "+5511999999999"            [String]
   â”‚  â”‚  â”œâ”€ dateOfBirth: "1990-01-01"          [String]
   â”‚  â”‚  â”œâ”€ emergencyContact: ""               [String]
   â”‚  â”‚  â”œâ”€ streak: 7                          [Number]
   â”‚  â”‚  â”œâ”€ insights: [...]                    [Array]
   â”‚  â”‚  â”‚  â”œâ”€ [0]
   â”‚  â”‚  â”‚  â”‚  â”œâ”€ text: "..."                  [String]
   â”‚  â”‚  â”‚  â”‚  â””â”€ timestamp: "..."             [String]
   â”‚  â”‚  â”‚  â””â”€ [1]...
   â”‚  â”‚  â”œâ”€ lastSummaryAt: "2026-01-27..."     [String]
   â”‚  â”‚  â”œâ”€ emergencyPermissionGranted: true   [Boolean]
   â”‚  â”‚  â”œâ”€ createdAt: "2026-01-20..."         [Timestamp]
   â”‚  â”‚  â”œâ”€ updatedAt: "2026-01-27..."         [Timestamp]
   â”‚  â”‚  â”‚
   â”‚  â”‚  â””â”€ chats/                             [Sub-collection]
   â”‚  â”‚     â”‚
   â”‚  â”‚     â”œâ”€ msg_1706390000000/              [Document]
   â”‚  â”‚     â”‚  â”œâ”€ id: "msg_1706390000000"      [String]
   â”‚  â”‚     â”‚  â”œâ”€ text: "Como estÃ¡?"           [String]
   â”‚  â”‚     â”‚  â”œâ”€ isUser: false                [Boolean]
   â”‚  â”‚     â”‚  â””â”€ timestamp: "2026-01-27..."   [String]
   â”‚  â”‚     â”‚
   â”‚  â”‚     â”œâ”€ msg_1706390000001/
   â”‚  â”‚     â”œâ”€ msg_1706390000002/
   â”‚  â”‚     â””â”€ msg_1706390000003/
   â”‚  â”‚
   â”‚  â”œâ”€ user_1706390001_xyz789/               [Document]
   â”‚  â””â”€ user_1706390002_def456/
   â”‚
   â””â”€ _connection_tests/                       [Collection]
      â”œâ”€ test_1706390000000/                   [Document]
      â”‚  â””â”€ timestamp: "2026-01-27..."         [String]
      â””â”€ test_1706390000001/
```

### AsyncStorage (Local)

```
AsyncStorage
â”‚
â”œâ”€ @mindcare_firebase_config                   [JSON String]
â”‚  â””â”€ {
â”‚       "apiKey": "AIzaSy...",
â”‚       "authDomain": "cuidadonow.firebaseapp.com",
â”‚       "projectId": "cuidadonow",
â”‚       "storageBucket": "cuidadonow.appspot.com",
â”‚       "messagingSenderId": "123456789",
â”‚       "appId": "1:123:web:abc"
â”‚     }
â”‚
â”œâ”€ @mindcare_user_id                           [String]
â”‚  â””â”€ "user_1706390000_abc123"
â”‚
â”œâ”€ @mindcare_user_profile                      [JSON String]
â”‚  â””â”€ { name: "...", firstName: "...", ... }
â”‚
â”œâ”€ @mindcare_chat_history                      [JSON String]
â”‚  â””â”€ [{ id: "...", text: "...", ... }, ...]
â”‚
â”œâ”€ @mindcare_mood_history                      [JSON String]
â”œâ”€ @mindcare_emergency_contacts                [JSON String]
â”œâ”€ @mindcare_settings                          [JSON String]
â”œâ”€ @mindcare_api_key                           [String]
â””â”€ @mindcare_voice_settings                    [JSON String]
```

## ğŸ” Fluxo de AutenticaÃ§Ã£o (Firebase Auth)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     LOGIN FLOW                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

TELA DE LOGIN
â”‚
â”œâ”€â–º UsuÃ¡rio insere email/senha
â”‚
â”œâ”€â–º Toca em "Entrar"
â”‚   â”‚
â”‚   â””â”€â–º firebaseService.login(email, password)
â”‚       â”‚
â”‚       â”œâ”€â–º Verifica: Firebase inicializado?
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€ NÃƒO â†’ return { success: false, error: '...' }
â”‚       â”‚   â”‚
â”‚       â”‚   â””â”€ SIM â†’ Continua
â”‚       â”‚
â”‚       â”œâ”€â–º signInWithEmailAndPassword(auth, email, password)
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â–º SUCESSO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       â”‚   â”‚                                 â”‚
â”‚       â”‚   â”‚                                 â–¼
â”‚       â”‚   â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       â”‚   â”‚                    â”‚ userCredential     â”‚
â”‚       â”‚   â”‚                    â”‚ .user              â”‚
â”‚       â”‚   â”‚                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚       â”‚   â”‚                           â”‚
â”‚       â”‚   â”‚                           â–¼
â”‚       â”‚   â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       â”‚   â”‚                    â”‚ return {           â”‚
â”‚       â”‚   â”‚                    â”‚   success: true,   â”‚
â”‚       â”‚   â”‚                    â”‚   user: {...}      â”‚
â”‚       â”‚   â”‚                    â”‚ }                  â”‚
â”‚       â”‚   â”‚                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚       â”‚   â”‚                           â”‚
â”‚       â”‚   â”‚                           â–¼
â”‚       â”‚   â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       â”‚   â”‚                    â”‚ UI: Redireciona    â”‚
â”‚       â”‚   â”‚                    â”‚ para Home          â”‚
â”‚       â”‚   â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚       â”‚   â”‚
â”‚       â”‚   â””â”€â–º ERRO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       â”‚                                   â”‚
â”‚       â”‚                                   â–¼
â”‚       â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       â”‚                        â”‚ catch(error)        â”‚
â”‚       â”‚                        â”‚ return {            â”‚
â”‚       â”‚                        â”‚   success: false,   â”‚
â”‚       â”‚                        â”‚   error: error.msg  â”‚
â”‚       â”‚                        â”‚ }                   â”‚
â”‚       â”‚                        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚       â”‚                               â”‚
â”‚       â”‚                               â–¼
â”‚       â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       â”‚                        â”‚ UI: Mostra erro     â”‚
â”‚       â”‚                        â”‚ (email/senha        â”‚
â”‚       â”‚                        â”‚  incorretos)        â”‚
â”‚       â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚       â”‚
â”‚       â””â”€â–º Retorna resultado para UI
â”‚
â””â”€â–º UI processa resultado
```

## ğŸ“¤ Fluxo de SincronizaÃ§Ã£o (Futuro Implementado)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              SAVE USER PROFILE FLOW                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

USUÃRIO ATUALIZA PERFIL (ex: muda nome)
â”‚
â”œâ”€â–º RegistrationScreen.saveProfile()
â”‚   â”‚
â”‚   â””â”€â–º userData.saveProfile({ name: "Novo Nome" })
â”‚       â”‚
â”‚       â”œâ”€â–º 1. SALVA LOCALMENTE (Prioridade)
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â–º Merge com perfil atual
â”‚       â”‚   â”‚   â””â”€â–º { ...current, name: "Novo Nome" }
â”‚       â”‚   â”‚
â”‚       â”‚   â””â”€â–º AsyncStorage.setItem('@mindcare_user_profile', ...)
â”‚       â”‚       â””â”€â–º âœ… GARANTIDO salvo localmente
â”‚       â”‚
â”‚       â””â”€â–º 2. TENTA SYNC FIREBASE (Best-effort)
â”‚           â”‚
â”‚           â”œâ”€â–º firebaseService.saveUserProfile(profile)
â”‚           â”‚   â”‚
â”‚           â”‚   â”œâ”€â–º Verifica: isInitialized?
â”‚           â”‚   â”‚   â”‚
â”‚           â”‚   â”‚   â”œâ”€ NÃƒO â†’ return (skip sync)
â”‚           â”‚   â”‚   â”‚
â”‚           â”‚   â”‚   â””â”€ SIM â†’ Continua
â”‚           â”‚   â”‚
â”‚           â”‚   â”œâ”€â–º Verifica: userId existe?
â”‚           â”‚   â”‚   â”‚
â”‚           â”‚   â”‚   â”œâ”€ NÃƒO â†’ return (skip sync)
â”‚           â”‚   â”‚   â”‚
â”‚           â”‚   â”‚   â””â”€ SIM â†’ Continua
â”‚           â”‚   â”‚
â”‚           â”‚   â”œâ”€â–º doc(db, 'users', userId)
â”‚           â”‚   â”‚
â”‚           â”‚   â””â”€â–º setDoc(userRef, {
â”‚           â”‚         ...profile,
â”‚           â”‚         updatedAt: new Date().toISOString()
â”‚           â”‚       }, { merge: true })
â”‚           â”‚       â”‚
â”‚           â”‚       â”œâ”€â–º SUCESSO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           â”‚       â”‚                       â”‚
â”‚           â”‚       â”‚                       â–¼
â”‚           â”‚       â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           â”‚       â”‚            â”‚ Firestore        â”‚
â”‚           â”‚       â”‚            â”‚ atualizado âœ…    â”‚
â”‚           â”‚       â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚           â”‚       â”‚
â”‚           â”‚       â””â”€â–º ERRO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           â”‚                              â”‚
â”‚           â”‚                              â–¼
â”‚           â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           â”‚                   â”‚ console.error()  â”‚
â”‚           â”‚                   â”‚ Falha silenciosa â”‚
â”‚           â”‚                   â”‚ Dados jÃ¡ salvos  â”‚
â”‚           â”‚                   â”‚ localmente âœ…    â”‚
â”‚           â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚           â”‚
â”‚           â””â”€â–º return (sync completo ou nÃ£o)
â”‚
â””â”€â–º UI atualiza
```

## ğŸŒ Deploy e Hosting

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              FIREBASE HOSTING DEPLOYMENT                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

DESENVOLVEDOR LOCAL
â”‚
â”œâ”€â–º npm run web -- --no-dev
â”‚   â””â”€â–º Expo build para web
â”‚       â””â”€â–º Gera: dist/
â”‚           â”œâ”€ index.html
â”‚           â”œâ”€ _expo/
â”‚           â””â”€ assets/
â”‚
â”œâ”€â–º firebase login
â”‚   â””â”€â–º Autentica com Google
â”‚
â”œâ”€â–º firebase deploy --only hosting
â”‚   â”‚
â”‚   â”œâ”€â–º LÃª firebase.json
â”‚   â”‚   â””â”€â–º {
â”‚   â”‚         "hosting": {
â”‚   â”‚           "public": "dist",
â”‚   â”‚           ...
â”‚   â”‚         }
â”‚   â”‚       }
â”‚   â”‚
â”‚   â”œâ”€â–º Upload dos arquivos
â”‚   â”‚   â””â”€â–º dist/ â†’ Firebase CDN
â”‚   â”‚
â”‚   â””â”€â–º Deploy completo âœ…
â”‚
â””â”€â–º App disponÃ­vel em:
    â”œâ”€ https://cuidadonow.web.app
    â””â”€ https://cuidadonow.firebaseapp.com

USUÃRIO FINAL
â”‚
â””â”€â–º Acessa URL
    â””â”€â–º Firebase CDN serve app
        â””â”€â–º React Native Web renderiza
```

## ğŸ”„ ComparaÃ§Ã£o: Com vs Sem Firebase

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SEM FIREBASE                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  USER DATA                                              â”‚
â”‚  â””â”€ AsyncStorage (apenas local)                        â”‚
â”‚     â”œâ”€ Perfil                                           â”‚
â”‚     â”œâ”€ Chat (500 msgs)                                  â”‚
â”‚     â”œâ”€ Humor (90 dias)                                  â”‚
â”‚     â””â”€ ConfiguraÃ§Ãµes                                    â”‚
â”‚                                                         â”‚
â”‚  CARACTERÃSTICAS                                        â”‚
â”‚  âœ… Funciona offline                                    â”‚
â”‚  âœ… Privacidade total (nada na nuvem)                  â”‚
â”‚  âœ… RÃ¡pido (sem latÃªncia de rede)                      â”‚
â”‚  âœ… Sem custos                                          â”‚
â”‚  âŒ Sem backup                                          â”‚
â”‚  âŒ Dados perdidos se desinstalar                      â”‚
â”‚  âŒ Sem multi-device                                    â”‚
â”‚  âŒ Sem autenticaÃ§Ã£o                                    â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    COM FIREBASE                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  USER DATA                                              â”‚
â”‚  â”œâ”€ AsyncStorage (local - primÃ¡rio)                    â”‚
â”‚  â”‚  â””â”€ Mesmos dados que acima                          â”‚
â”‚  â”‚                                                      â”‚
â”‚  â””â”€ Firestore (nuvem - backup)                         â”‚
â”‚     â”œâ”€ users/{userId}/profile                          â”‚
â”‚     â””â”€ users/{userId}/chats                            â”‚
â”‚                                                         â”‚
â”‚  CARACTERÃSTICAS                                        â”‚
â”‚  âœ… Funciona offline (local-first)                     â”‚
â”‚  âœ… Backup automÃ¡tico na nuvem                         â”‚
â”‚  âœ… SincronizaÃ§Ã£o multi-device                         â”‚
â”‚  âœ… AutenticaÃ§Ã£o segura                                â”‚
â”‚  âœ… VersÃ£o web (hosting)                               â”‚
â”‚  âš ï¸ Requer configuraÃ§Ã£o                                â”‚
â”‚  âš ï¸ LatÃªncia de rede para sync                         â”‚
â”‚  âš ï¸ Custos se escalar muito                            â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ˆ Crescimento de Dados (Estimativas)

```
USUÃRIO TÃPICO (30 dias de uso)
â”‚
â”œâ”€ Perfil
â”‚  â””â”€ ~2 KB
â”‚
â”œâ”€ Chat History
â”‚  â”œâ”€ 10 msgs/dia Ã— 30 dias = 300 msgs
â”‚  â”œâ”€ ~500 bytes/msg
â”‚  â””â”€ ~150 KB total
â”‚
â”œâ”€ Mood History
â”‚  â”œâ”€ 1 entrada/dia Ã— 30 dias = 30 entradas
â”‚  â”œâ”€ ~200 bytes/entrada
â”‚  â””â”€ ~6 KB total
â”‚
â””â”€ TOTAL por usuÃ¡rio: ~160 KB/mÃªs

FIRESTORE (1000 usuÃ¡rios)
â”œâ”€ 160 KB Ã— 1000 = 160 MB
â”œâ”€ Custo estimado (writes): ~$0.36/mÃªs*
â””â”€ Custo estimado (reads): ~$0.12/mÃªs*

* Considerando Firebase free tier e uso moderado
```

## ğŸ¯ Estados do Sistema

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              FIREBASE SERVICE STATES                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   UNINITIALIZED â”‚  Estado inicial
â”‚  isInit = false â”‚  app = null
â”‚  auth = null    â”‚  db = null
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ initialize(config)
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   INITIALIZING  â”‚  Tentando conectar
â”‚  isInit = false â”‚  Criando instÃ¢ncias
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â”€ SUCESSO â”€â”€â”€â”€â”€â”
         â”‚                 â”‚
         â–¼                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    READY        â”‚   â”‚     ERROR       â”‚
â”‚  isInit = true  â”‚   â”‚  isInit = false â”‚
â”‚  app = {...}    â”‚   â”‚  app = null     â”‚
â”‚  auth = {...}   â”‚   â”‚  Volta para     â”‚
â”‚  db = {...}     â”‚   â”‚  UNINITIALIZED  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ resetConfig()
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   RESETTING     â”‚
â”‚  Removendo...   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  UNINITIALIZED  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Ãšltima atualizaÃ§Ã£o**: 2026-01-27
**VersÃ£o**: 1.0
